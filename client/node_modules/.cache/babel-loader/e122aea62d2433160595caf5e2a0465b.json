{"ast":null,"code":"'use strict';\n\nvar IDENTIFIER = /^[a-z_$][a-z0-9_$-]*$/i;\n\nvar customRuleCode = require('./dotjs/custom');\n\nvar definitionSchema = require('./definition_schema');\n\nmodule.exports = {\n  add: addKeyword,\n  get: getKeyword,\n  remove: removeKeyword,\n  validate: validateKeyword\n};\n/**\n * Define custom keyword\n * @this  Ajv\n * @param {String} keyword custom keyword, should be unique (including different from all standard, custom and macro keywords).\n * @param {Object} definition keyword definition object with properties `type` (type(s) which the keyword applies to), `validate` or `compile`.\n * @return {Ajv} this for method chaining\n */\n\nfunction addKeyword(keyword, definition) {\n  /* jshint validthis: true */\n\n  /* eslint no-shadow: 0 */\n  var RULES = this.RULES;\n  if (RULES.keywords[keyword]) throw new Error('Keyword ' + keyword + ' is already defined');\n  if (!IDENTIFIER.test(keyword)) throw new Error('Keyword ' + keyword + ' is not a valid identifier');\n\n  if (definition) {\n    this.validateKeyword(definition, true);\n    var dataType = definition.type;\n\n    if (Array.isArray(dataType)) {\n      for (var i = 0; i < dataType.length; i++) _addRule(keyword, dataType[i], definition);\n    } else {\n      _addRule(keyword, dataType, definition);\n    }\n\n    var metaSchema = definition.metaSchema;\n\n    if (metaSchema) {\n      if (definition.$data && this._opts.$data) {\n        metaSchema = {\n          anyOf: [metaSchema, {\n            '$ref': 'https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#'\n          }]\n        };\n      }\n\n      definition.validateSchema = this.compile(metaSchema, true);\n    }\n  }\n\n  RULES.keywords[keyword] = RULES.all[keyword] = true;\n\n  function _addRule(keyword, dataType, definition) {\n    var ruleGroup;\n\n    for (var i = 0; i < RULES.length; i++) {\n      var rg = RULES[i];\n\n      if (rg.type == dataType) {\n        ruleGroup = rg;\n        break;\n      }\n    }\n\n    if (!ruleGroup) {\n      ruleGroup = {\n        type: dataType,\n        rules: []\n      };\n      RULES.push(ruleGroup);\n    }\n\n    var rule = {\n      keyword: keyword,\n      definition: definition,\n      custom: true,\n      code: customRuleCode,\n      implements: definition.implements\n    };\n    ruleGroup.rules.push(rule);\n    RULES.custom[keyword] = rule;\n  }\n\n  return this;\n}\n/**\n * Get keyword\n * @this  Ajv\n * @param {String} keyword pre-defined or custom keyword.\n * @return {Object|Boolean} custom keyword definition, `true` if it is a predefined keyword, `false` otherwise.\n */\n\n\nfunction getKeyword(keyword) {\n  /* jshint validthis: true */\n  var rule = this.RULES.custom[keyword];\n  return rule ? rule.definition : this.RULES.keywords[keyword] || false;\n}\n/**\n * Remove keyword\n * @this  Ajv\n * @param {String} keyword pre-defined or custom keyword.\n * @return {Ajv} this for method chaining\n */\n\n\nfunction removeKeyword(keyword) {\n  /* jshint validthis: true */\n  var RULES = this.RULES;\n  delete RULES.keywords[keyword];\n  delete RULES.all[keyword];\n  delete RULES.custom[keyword];\n\n  for (var i = 0; i < RULES.length; i++) {\n    var rules = RULES[i].rules;\n\n    for (var j = 0; j < rules.length; j++) {\n      if (rules[j].keyword == keyword) {\n        rules.splice(j, 1);\n        break;\n      }\n    }\n  }\n\n  return this;\n}\n/**\n * Validate keyword definition\n * @this  Ajv\n * @param {Object} definition keyword definition object.\n * @param {Boolean} throwError true to throw exception if definition is invalid\n * @return {boolean} validation result\n */\n\n\nfunction validateKeyword(definition, throwError) {\n  validateKeyword.errors = null;\n  var v = this._validateKeyword = this._validateKeyword || this.compile(definitionSchema, true);\n  if (v(definition)) return true;\n  validateKeyword.errors = v.errors;\n  if (throwError) throw new Error('custom keyword definition is invalid: ' + this.errorsText(v.errors));else return false;\n}","map":{"version":3,"names":["IDENTIFIER","customRuleCode","require","definitionSchema","module","exports","add","addKeyword","get","getKeyword","remove","removeKeyword","validate","validateKeyword","keyword","definition","RULES","keywords","Error","test","dataType","type","Array","isArray","i","length","_addRule","metaSchema","$data","_opts","anyOf","validateSchema","compile","all","ruleGroup","rg","rules","push","rule","custom","code","implements","j","splice","throwError","errors","v","_validateKeyword","errorsText"],"sources":["/home/cyrus/WebstormProjects/bigbull/client/node_modules/ajv/lib/keyword.js"],"sourcesContent":["'use strict';\n\nvar IDENTIFIER = /^[a-z_$][a-z0-9_$-]*$/i;\nvar customRuleCode = require('./dotjs/custom');\nvar definitionSchema = require('./definition_schema');\n\nmodule.exports = {\n  add: addKeyword,\n  get: getKeyword,\n  remove: removeKeyword,\n  validate: validateKeyword\n};\n\n\n/**\n * Define custom keyword\n * @this  Ajv\n * @param {String} keyword custom keyword, should be unique (including different from all standard, custom and macro keywords).\n * @param {Object} definition keyword definition object with properties `type` (type(s) which the keyword applies to), `validate` or `compile`.\n * @return {Ajv} this for method chaining\n */\nfunction addKeyword(keyword, definition) {\n  /* jshint validthis: true */\n  /* eslint no-shadow: 0 */\n  var RULES = this.RULES;\n  if (RULES.keywords[keyword])\n    throw new Error('Keyword ' + keyword + ' is already defined');\n\n  if (!IDENTIFIER.test(keyword))\n    throw new Error('Keyword ' + keyword + ' is not a valid identifier');\n\n  if (definition) {\n    this.validateKeyword(definition, true);\n\n    var dataType = definition.type;\n    if (Array.isArray(dataType)) {\n      for (var i=0; i<dataType.length; i++)\n        _addRule(keyword, dataType[i], definition);\n    } else {\n      _addRule(keyword, dataType, definition);\n    }\n\n    var metaSchema = definition.metaSchema;\n    if (metaSchema) {\n      if (definition.$data && this._opts.$data) {\n        metaSchema = {\n          anyOf: [\n            metaSchema,\n            { '$ref': 'https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#' }\n          ]\n        };\n      }\n      definition.validateSchema = this.compile(metaSchema, true);\n    }\n  }\n\n  RULES.keywords[keyword] = RULES.all[keyword] = true;\n\n\n  function _addRule(keyword, dataType, definition) {\n    var ruleGroup;\n    for (var i=0; i<RULES.length; i++) {\n      var rg = RULES[i];\n      if (rg.type == dataType) {\n        ruleGroup = rg;\n        break;\n      }\n    }\n\n    if (!ruleGroup) {\n      ruleGroup = { type: dataType, rules: [] };\n      RULES.push(ruleGroup);\n    }\n\n    var rule = {\n      keyword: keyword,\n      definition: definition,\n      custom: true,\n      code: customRuleCode,\n      implements: definition.implements\n    };\n    ruleGroup.rules.push(rule);\n    RULES.custom[keyword] = rule;\n  }\n\n  return this;\n}\n\n\n/**\n * Get keyword\n * @this  Ajv\n * @param {String} keyword pre-defined or custom keyword.\n * @return {Object|Boolean} custom keyword definition, `true` if it is a predefined keyword, `false` otherwise.\n */\nfunction getKeyword(keyword) {\n  /* jshint validthis: true */\n  var rule = this.RULES.custom[keyword];\n  return rule ? rule.definition : this.RULES.keywords[keyword] || false;\n}\n\n\n/**\n * Remove keyword\n * @this  Ajv\n * @param {String} keyword pre-defined or custom keyword.\n * @return {Ajv} this for method chaining\n */\nfunction removeKeyword(keyword) {\n  /* jshint validthis: true */\n  var RULES = this.RULES;\n  delete RULES.keywords[keyword];\n  delete RULES.all[keyword];\n  delete RULES.custom[keyword];\n  for (var i=0; i<RULES.length; i++) {\n    var rules = RULES[i].rules;\n    for (var j=0; j<rules.length; j++) {\n      if (rules[j].keyword == keyword) {\n        rules.splice(j, 1);\n        break;\n      }\n    }\n  }\n  return this;\n}\n\n\n/**\n * Validate keyword definition\n * @this  Ajv\n * @param {Object} definition keyword definition object.\n * @param {Boolean} throwError true to throw exception if definition is invalid\n * @return {boolean} validation result\n */\nfunction validateKeyword(definition, throwError) {\n  validateKeyword.errors = null;\n  var v = this._validateKeyword = this._validateKeyword\n                                  || this.compile(definitionSchema, true);\n\n  if (v(definition)) return true;\n  validateKeyword.errors = v.errors;\n  if (throwError)\n    throw new Error('custom keyword definition is invalid: '  + this.errorsText(v.errors));\n  else\n    return false;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}