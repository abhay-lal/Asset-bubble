{"ast":null,"code":"//\n//  Parser - for Twitter Streaming API\n//\nvar util = require('util'),\n    EventEmitter = require('events').EventEmitter;\n\nvar Parser = module.exports = function () {\n  this.message = '';\n  EventEmitter.call(this);\n};\n\nutil.inherits(Parser, EventEmitter);\n\nParser.prototype.parse = function (chunk) {\n  this.message += chunk;\n  chunk = this.message;\n  var size = chunk.length,\n      start = 0,\n      offset = 0,\n      curr,\n      next;\n\n  while (offset < size) {\n    curr = chunk[offset];\n    next = chunk[offset + 1];\n\n    if (curr === '\\r' && next === '\\n') {\n      var piece = chunk.slice(start, offset);\n      start = offset += 2;\n\n      if (!piece.length) {\n        continue;\n      } //empty object\n\n\n      if (piece === 'Exceeded connection limit for user') {\n        this.emit('connection-limit-exceeded', new Error('Twitter says: ' + piece + '. Only instantiate one stream per set of credentials.'));\n        continue;\n      }\n\n      try {\n        var msg = JSON.parse(piece);\n      } catch (err) {\n        this.emit('error', new Error('Error parsing twitter reply: `' + piece + '`, error message `' + err + '`'));\n      } finally {\n        if (msg) this.emit('element', msg);\n        continue;\n      }\n    }\n\n    offset++;\n  }\n\n  this.message = chunk.slice(start, size);\n};","map":{"version":3,"names":["util","require","EventEmitter","Parser","module","exports","message","call","inherits","prototype","parse","chunk","size","length","start","offset","curr","next","piece","slice","emit","Error","msg","JSON","err"],"sources":["/home/cyrus/WebstormProjects/bigbull/client/node_modules/twit/lib/parser.js"],"sourcesContent":["//\n//  Parser - for Twitter Streaming API\n//\nvar util = require('util')\n  , EventEmitter = require('events').EventEmitter;\n\nvar Parser = module.exports = function ()  {\n  this.message = ''\n\n  EventEmitter.call(this);\n};\n\nutil.inherits(Parser, EventEmitter);\n\nParser.prototype.parse = function (chunk) {\n  this.message += chunk;\n  chunk = this.message;\n\n  var size = chunk.length\n    , start = 0\n    , offset = 0\n    , curr\n    , next;\n\n  while (offset < size) {\n    curr = chunk[offset];\n    next = chunk[offset + 1];\n\n    if (curr === '\\r' && next === '\\n') {\n      var piece = chunk.slice(start, offset);\n      start = offset += 2;\n\n      if (!piece.length) { continue; } //empty object\n\n      if (piece === 'Exceeded connection limit for user') {\n        this.emit('connection-limit-exceeded',\n                  new Error('Twitter says: ' + piece + '. Only instantiate one stream per set of credentials.'));\n        continue;\n      }\n\n      try {\n        var msg = JSON.parse(piece)\n      } catch (err) {\n        this.emit('error', new Error('Error parsing twitter reply: `'+piece+'`, error message `'+err+'`'));\n      } finally {\n        if (msg)\n          this.emit('element', msg)\n\n        continue\n      }\n    }\n    offset++;\n  }\n\n  this.message = chunk.slice(start, size);\n};\n"],"mappings":"AAAA;AACA;AACA;AACA,IAAIA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAAlB;AAAA,IACIC,YAAY,GAAGD,OAAO,CAAC,QAAD,CAAP,CAAkBC,YADrC;;AAGA,IAAIC,MAAM,GAAGC,MAAM,CAACC,OAAP,GAAiB,YAAa;EACzC,KAAKC,OAAL,GAAe,EAAf;EAEAJ,YAAY,CAACK,IAAb,CAAkB,IAAlB;AACD,CAJD;;AAMAP,IAAI,CAACQ,QAAL,CAAcL,MAAd,EAAsBD,YAAtB;;AAEAC,MAAM,CAACM,SAAP,CAAiBC,KAAjB,GAAyB,UAAUC,KAAV,EAAiB;EACxC,KAAKL,OAAL,IAAgBK,KAAhB;EACAA,KAAK,GAAG,KAAKL,OAAb;EAEA,IAAIM,IAAI,GAAGD,KAAK,CAACE,MAAjB;EAAA,IACIC,KAAK,GAAG,CADZ;EAAA,IAEIC,MAAM,GAAG,CAFb;EAAA,IAGIC,IAHJ;EAAA,IAIIC,IAJJ;;EAMA,OAAOF,MAAM,GAAGH,IAAhB,EAAsB;IACpBI,IAAI,GAAGL,KAAK,CAACI,MAAD,CAAZ;IACAE,IAAI,GAAGN,KAAK,CAACI,MAAM,GAAG,CAAV,CAAZ;;IAEA,IAAIC,IAAI,KAAK,IAAT,IAAiBC,IAAI,KAAK,IAA9B,EAAoC;MAClC,IAAIC,KAAK,GAAGP,KAAK,CAACQ,KAAN,CAAYL,KAAZ,EAAmBC,MAAnB,CAAZ;MACAD,KAAK,GAAGC,MAAM,IAAI,CAAlB;;MAEA,IAAI,CAACG,KAAK,CAACL,MAAX,EAAmB;QAAE;MAAW,CAJE,CAID;;;MAEjC,IAAIK,KAAK,KAAK,oCAAd,EAAoD;QAClD,KAAKE,IAAL,CAAU,2BAAV,EACU,IAAIC,KAAJ,CAAU,mBAAmBH,KAAnB,GAA2B,uDAArC,CADV;QAEA;MACD;;MAED,IAAI;QACF,IAAII,GAAG,GAAGC,IAAI,CAACb,KAAL,CAAWQ,KAAX,CAAV;MACD,CAFD,CAEE,OAAOM,GAAP,EAAY;QACZ,KAAKJ,IAAL,CAAU,OAAV,EAAmB,IAAIC,KAAJ,CAAU,mCAAiCH,KAAjC,GAAuC,oBAAvC,GAA4DM,GAA5D,GAAgE,GAA1E,CAAnB;MACD,CAJD,SAIU;QACR,IAAIF,GAAJ,EACE,KAAKF,IAAL,CAAU,SAAV,EAAqBE,GAArB;QAEF;MACD;IACF;;IACDP,MAAM;EACP;;EAED,KAAKT,OAAL,GAAeK,KAAK,CAACQ,KAAN,CAAYL,KAAZ,EAAmBF,IAAnB,CAAf;AACD,CAzCD"},"metadata":{},"sourceType":"script"}